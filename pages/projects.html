<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Projects — Dae Han</title>
    <meta name="description" content="Portfolio projects of Dae Han — building pipelines, tools, and experiments with data." />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Genos:wght@400;600;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'system-ui', 'sans-serif'],
              display: ['Genos', 'system-ui', 'sans-serif'],
              mono: ['Courier New', 'Courier', 'monospace']
            },
            colors: {
              supreme: '#ec1d27'
            },
            keyframes: {
              float: {
                '0%, 100%': { transform: 'translateY(0px)' },
                '50%': { transform: 'translateY(-5px)' }
              },
              float2: {
                '0%, 100%': { transform: 'translateY(0px)' },
                '50%': { transform: 'translateY(-5px)' }
              }
            },
            animation: {
              float: 'float 3s ease-in-out infinite',
              float2: 'float2 4s ease-in-out infinite'
            }
          }
        },
        darkMode: 'class'
      }
    </script>
    
    <style>
      .nav-arrow {
        transition: color 0.3s ease;
        cursor: pointer;
      }
      .nav-arrow.disabled {
        cursor: default;
        opacity: 0.5;
      }
      .nav-arrow:not(.disabled):hover {
        color: #ec1d27;
      }
      .nav-link {
        text-rendering: optimizeLegibility;
        font-feature-settings: "kern";
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        -webkit-text-size-adjust: 100%;
        -moz-text-size-adjust: 100%;
        text-size-adjust: 100%;
        font-family: HelveticaNeue, sans-serif;
        font-size: .75rem;
        line-height: 1.0625rem;
        font-weight: bold;
      }
      #projectList a {
        white-space: nowrap;
        font-weight: bold;
        color: rgb(117, 117, 117);
      }
      #projectList a:hover,
      #projectList a.text-supreme {
        text-decoration: underline;
        color: black !important;
      }
      #projectListMobile a {
        white-space: nowrap;
        font-weight: bold;
        color: rgb(117, 117, 117);
      }
      #projectListMobile a:hover,
      #projectListMobile a.text-supreme {
        text-decoration: underline;
        color: black !important;
      }
      #projectList {
        display: block; /* Show by default on projects page */
      }
      #projectList.hidden {
        display: none;
      }
      #projectListMobile {
        display: block; /* Show by default on projects page */
      }
      #projectListMobile.hidden {
        display: none;
      }
    </style>
  </head>
  <body class="bg-white text-black font-sans text-sm">
    <header class="fixed w-full top-0 left-0 bg-white z-10">
      <nav class="w-full h-full grid grid-cols-4 relative py-4 sm:py-7">
        <!-- Vertical dividers -->
        <div class="absolute left-[25%] top-0 bottom-0 w-px"></div>
        <div class="absolute left-[50%] top-0 bottom-0 w-px"></div>
        <div class="absolute left-[75%] top-0 bottom-0 w-px"></div>
        
        <!-- Pane 1: DAE HAN logo -->
        <div class="col-span-1 flex items-center pl-4">
          <a href="../index.html" class="text-lg sm:text-2xl font-display font-bold tracking-tight inline-flex items-baseline gap-1">
            <span class="inline-block animate-float">DAE</span>
            <span class="inline-block animate-float2">HAN</span>
          </a>
        </div>
        
        <!-- Pane 2: Navigation links on the left (hidden on mobile) -->
        <div class="col-span-1 hidden sm:flex items-center pl-4">
          <ul class="flex space-x-3 sm:space-x-6">
            <li><a href="about.html" class="nav-link hover:text-supreme">ABOUT</a></li>
            <li class="relative">
              <a href="projects.html" id="projectsToggle" class="nav-link hover:text-supreme text-supreme inline-flex items-center gap-1">PROJECTS <i class="block w-[7px]"><svg id="projectsCaret" class="icon icon--caret" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 7.75 5.09" style="transform: rotate(180deg);"><title>Caret</title><polygon points="3.88 0 7.75 4.43 7 5.09 3.88 1.52 .75 5.09 0 4.43 3.88 0"></polygon></svg></i></a>
              <!-- Project List - Positioned below PROJECTS -->
              <ul id="projectList" class="absolute left-0 top-full flex flex-col space-y-4 sm:space-y-0 mt-4 sm:mt-6">
                <!-- Project list items will be inserted here by JavaScript -->
              </ul>
            </li>
            <li><a href="resume.html" class="nav-link hover:text-supreme">RESUME</a></li>
          </ul>
        </div>
        
        <!-- Pane 3: Empty -->
        <div class="col-span-1 hidden sm:block"></div>
        
        <!-- Pane 4: CONTACT on the right -->
        <div class="col-span-3 sm:col-span-1 flex items-center justify-end pr-4 sm:pr-16">
          <a href="contact.html" class="nav-link hover:text-supreme">CONTACT</a>
        </div>
      </nav>
    </header>

    <main class="flex items-center justify-center min-h-screen px-4 pt-8 pb-16 sm:pb-16">
      <div class="max-w-6xl w-[60%]">
        
        <!-- Project Display -->
        <div id="projectDisplay" class="hidden">
          <div class="flex flex-col gap-8">
            
            <!-- Image and Description Row -->
            <div class="flex flex-col lg:flex-row gap-8 items-center justify-center">
              
              <!-- Image Container (slightly to the left) -->
              <div class="flex-1 lg:max-w-[55%] flex justify-center">
                <div class="relative">
                  <img id="projectImage" src="" alt="Project image" class="w-full h-auto object-contain">
                  
                  <!-- Navigation Arrows -->
                  <div class="flex justify-center items-center gap-8 mt-6">
                    <button id="prevArrow" class="nav-arrow disabled font-mono text-2xl text-gray-400">
                      &lt;
                    </button>
                    <button id="nextArrow" class="nav-arrow disabled font-mono text-2xl text-gray-400">
                      &gt;
                    </button>
                  </div>
                </div>
              </div>

              <!-- Description (to the right of image) -->
              <div class="flex-1 lg:max-w-[45%]">
                <h2 id="projectTitle" class="font-mono text-base font-normal text-black-900 mb-4" style="font-feature-settings: 'liga' 1;"></h2>
                <div id="projectDescription" class="text-[10px] font-mono text-black-700 space-y-3"></div>
                <a id="projectRepo" href="#" target="_blank" rel="noopener" class="inline-block mt-6 font-mono text-[10px] text-gray-900 border border-gray-900 hover:bg-gray-100 px-4 py-2 transition-colors">
                  View Repository
                </a>
              </div>

            </div>

          </div>
        </div>

      </div>
    </main>

    <footer class="w-full bg-white relative">
      <div class="w-full pl-4 pr-4 sm:pr-16 py-3 flex flex-col sm:flex-row justify-between sm:justify-end items-start sm:items-center">
        <!-- Mobile navigation links (vertical on left) -->
        <ul class="flex flex-col space-y-3 sm:hidden mb-3 sm:mb-0">
          <li><a href="about.html" class="nav-link hover:text-supreme">ABOUT</a></li>
          <li class="relative">
            <a href="projects.html" id="projectsToggleMobile" class="nav-link hover:text-supreme text-supreme inline-flex items-center gap-1">PROJECTS <i class="block w-[7px]"><svg id="projectsCaretMobile" class="icon icon--caret" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 7.75 5.09" style="transform: rotate(180deg);"><title>Caret</title><polygon points="3.88 0 7.75 4.43 7 5.09 3.88 1.52 .75 5.09 0 4.43 3.88 0"></polygon></svg></i></a>
            <!-- Project List - Mobile -->
            <ul id="projectListMobile" class="flex flex-col space-y-2 mt-2 ml-4">
              <!-- Project list items will be inserted here by JavaScript -->
            </ul>
          </li>
          <li><a href="resume.html" class="nav-link hover:text-supreme">RESUME</a></li>
        </ul>
        <!-- Copyright (right side on desktop, below nav on mobile) -->
        <div class="text-[10px] sm:text-xs font-mono text-gray-800 tracking-tight ml-auto sm:ml-0">
          © 2025 Dae Han
        </div>
      </div>
    </footer>

    <script>
      // Project data structure
      const projects = [
        {
          title: 'NYC Homeless Shelter Demand Forecast',
          description: 'Forecasted future shelter occupancy in New York City using open datasets, feature engineering, and time series modeling. Built predictive models to help city planners allocate resources more effectively.',
          repo: 'https://github.com/dae-han/Homeless_Shelter_Demand_Prediction',
          images: [
            {
              src: 'assets/nyc_homeless_shelter_project.png',
              alt: 'NYC Homeless Shelter Project'
            },
            {
              src: 'assets/nyc_homeless_shelter_project_2.png',
              alt: 'NYC Homeless Shelter Project - Analysis'
            }
          ]
        },
        {
          title: 'Disaster Tweet Map',
          description: 'Built a real-time web app to identify and visualize tweets about natural disasters using NLP and geolocation data. Processes thousands of tweets to provide real-time disaster awareness.',
          repo: 'https://github.com/dae-han/disaster_tweet_map',
          images: [
            {
              src: 'assets/disaster_tweet_map_project.png',
              alt: 'Disaster Tweet Map'
            }
          ]
        },
        {
          title: 'Apple Music vs. Spotify: User Insights',
          description: 'Performed text classification on Reddit posts to uncover user sentiment and market insights between Apple Music and Spotify. Analyzed thousands of posts to identify key user preferences and pain points.',
          repo: 'https://github.com/dae-han/reddit_classification',
          images: [
            {
              src: 'assets/music_user_project.png',
              alt: 'Music User Insights'
            },
            {
              src: 'assets/music_user_project_2.png',
              alt: 'Music User Insights - Sentiment Analysis'
            },
            {
              src: 'assets/music_user_project_3.png',
              alt: 'Music User Insights - Comparison'
            }
          ]
        }
      ];

      // State management
      let currentProjectIndex = -1;
      let currentImageIndex = 0;

      // Initialize project list
      const projectList = document.getElementById('projectList');
      const projectListMobile = document.getElementById('projectListMobile');
      const projectDisplay = document.getElementById('projectDisplay');
      
      // Helper function to create project link
      function createProjectLink(project, index, container) {
        const listItem = document.createElement('li');
        const link = document.createElement('a');
        link.href = '#';
        link.className = 'nav-link';
        link.textContent = project.title;
        link.addEventListener('click', (e) => {
          e.preventDefault();
          currentProjectIndex = index;
          currentImageIndex = 0;
          displayProject();
          
          // Update active state in both lists
          const allLists = [projectList, projectListMobile].filter(list => list);
          allLists.forEach(list => {
            list.querySelectorAll('a').forEach((a, i) => {
              if (i === index) {
                a.classList.add('text-supreme');
              } else {
                a.classList.remove('text-supreme');
              }
            });
          });
        });
        listItem.appendChild(link);
        container.appendChild(listItem);
      }
      
      // Populate both header and mobile project lists
      projects.forEach((project, index) => {
        if (projectList) {
          createProjectLink(project, index, projectList);
        }
        if (projectListMobile) {
          createProjectLink(project, index, projectListMobile);
        }
      });

      // Automatically display the first project on page load
      if (projects.length > 0) {
        currentProjectIndex = 0;
        currentImageIndex = 0;
        displayProject();
        
        // Set first project as active in both lists
        const allLists = [projectList, projectListMobile].filter(list => list);
        allLists.forEach(list => {
          const firstLink = list.querySelector('a');
          if (firstLink) {
            firstLink.classList.add('text-supreme');
          }
        });
      }

      // Toggle project list visibility when PROJECTS is clicked
      function toggleProjectList() {
        const isVisible = !projectList.classList.contains('hidden');
        
        // Toggle both desktop and mobile lists
        if (isVisible) {
          projectList.classList.add('hidden');
          if (projectListMobile) projectListMobile.classList.add('hidden');
          
          // Rotate caret to point right (90deg) when closed
          const caret = document.getElementById('projectsCaret');
          const caretMobile = document.getElementById('projectsCaretMobile');
          if (caret) caret.style.transform = 'rotate(90deg)';
          if (caretMobile) caretMobile.style.transform = 'rotate(90deg)';
        } else {
          projectList.classList.remove('hidden');
          if (projectListMobile) projectListMobile.classList.remove('hidden');
          
          // Rotate caret to point down (180deg) when open
          const caret = document.getElementById('projectsCaret');
          const caretMobile = document.getElementById('projectsCaretMobile');
          if (caret) caret.style.transform = 'rotate(180deg)';
          if (caretMobile) caretMobile.style.transform = 'rotate(180deg)';
        }
      }

      // Add click handlers to PROJECTS links
      const projectsToggle = document.getElementById('projectsToggle');
      const projectsToggleMobile = document.getElementById('projectsToggleMobile');

      if (projectsToggle) {
        projectsToggle.addEventListener('click', (e) => {
          e.preventDefault();
          toggleProjectList();
        });
      }

      if (projectsToggleMobile) {
        projectsToggleMobile.addEventListener('click', (e) => {
          e.preventDefault();
          toggleProjectList();
        });
      }

      // Display selected project
      function displayProject() {
        const project = projects[currentProjectIndex];
        if (!project) return;

        // Show display area
        projectDisplay.classList.remove('hidden');

        // Update title and description
        document.getElementById('projectTitle').textContent = project.title;
        document.getElementById('projectDescription').textContent = project.description;
        document.getElementById('projectRepo').href = project.repo;

        // Display first image
        updateImage();
        updateArrows();
      }

      // Update displayed image
      function updateImage() {
        const project = projects[currentProjectIndex];
        if (!project || !project.images || project.images.length === 0) return;

        const image = project.images[currentImageIndex];
        const imgElement = document.getElementById('projectImage');
        imgElement.src = image.src;
        imgElement.alt = image.alt;
      }

      // Update arrow states
      function updateArrows() {
        const project = projects[currentProjectIndex];
        if (!project || !project.images) return;

        const prevArrow = document.getElementById('prevArrow');
        const nextArrow = document.getElementById('nextArrow');

        // Previous arrow
        if (currentImageIndex > 0) {
          prevArrow.classList.remove('disabled');
          prevArrow.style.color = '';
        } else {
          prevArrow.classList.add('disabled');
          prevArrow.style.color = '#9ca3af'; // gray-400
        }

        // Next arrow
        if (currentImageIndex < project.images.length - 1) {
          nextArrow.classList.remove('disabled');
          nextArrow.style.color = '';
        } else {
          nextArrow.classList.add('disabled');
          nextArrow.style.color = '#9ca3af'; // gray-400
        }
      }

      // Navigation handlers
      document.getElementById('prevArrow').addEventListener('click', () => {
        if (currentImageIndex > 0) {
          currentImageIndex--;
          updateImage();
          updateArrows();
        }
      });

      document.getElementById('nextArrow').addEventListener('click', () => {
        const project = projects[currentProjectIndex];
        if (project && currentImageIndex < project.images.length - 1) {
          currentImageIndex++;
          updateImage();
          updateArrows();
        }
      });

      // Sync animations across page loads - MUST run immediately
      (function() {
        const animationStartKey = 'animationStartTime';
        let startTime = sessionStorage.getItem(animationStartKey);
        
        // Only set startTime if it doesn't exist or is invalid - never reset it
        if (startTime === null || startTime === undefined || startTime === '' || startTime === 'null' || startTime === 'undefined') {
          startTime = Date.now().toString();
          sessionStorage.setItem(animationStartKey, startTime);
        }
        
        const elapsed = (Date.now() - parseInt(startTime)) / 1000;
        const daeDelay = -(elapsed % 3);
        const hanDelay = -(elapsed % 4);
        
        // Apply delays immediately - don't wait for DOM
        function applyDelays() {
          const daeSpan = document.querySelector('.animate-float');
          const hanSpan = document.querySelector('.animate-float2');
          
          if (daeSpan) {
            daeSpan.style.animationDelay = daeDelay + 's';
          }
          if (hanSpan) {
            hanSpan.style.animationDelay = hanDelay + 's';
          }
        }
        
        // Try immediately, then again when DOM is ready
        applyDelays();
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', applyDelays);
        }
      })();
    </script>
  </body>
</html>
